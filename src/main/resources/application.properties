# --- Reactive PostgreSQL / Hibernate Reactive ---
quarkus.datasource.db-kind=postgresql
quarkus.datasource.devservices.db-name=reactivepoc
quarkus.datasource.devservices.username=quarkus
quarkus.datasource.devservices.password=quarkus
# postgres:17 currently fails to boot in this Docker environment.
quarkus.datasource.devservices.image-name=postgres:16
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.sql-load-script=import.sql

# --- Reactive Messaging / Kafka ---
# In dev/test, leave bootstrap server resolution to Dev Services.
# In production, allow explicit override via KAFKA_BOOTSTRAP_SERVERS.
%prod.kafka.bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
%prod.mp.messaging.connector.smallrye-kafka.bootstrap.servers=${kafka.bootstrap.servers}

mp.messaging.outgoing.prices-out.connector=smallrye-kafka
mp.messaging.outgoing.prices-out.topic=prices
mp.messaging.outgoing.prices-out.value.serializer=org.apache.kafka.common.serialization.DoubleSerializer

mp.messaging.incoming.prices-in.connector=smallrye-kafka
mp.messaging.incoming.prices-in.topic=prices
mp.messaging.incoming.prices-in.value.deserializer=org.apache.kafka.common.serialization.DoubleDeserializer
mp.messaging.incoming.prices-in.auto.offset.reset=earliest
mp.messaging.incoming.prices-in.group.id=reactive-poc-consumer

# If no broker is available, Quarkus can start one through Dev Services.
quarkus.kafka.devservices.topic-partitions.prices=1
